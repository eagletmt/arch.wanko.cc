# $Id: PKGBUILD 105144 2012-01-21 21:54:48
# Contributor: Eric Belanger <eric@archlinux.org>
# Contributor (v1.0 vi-patch): Evan LeCompte <evanlec@gmail.com>
# Maintainer: Evan LeCompte <evanlec@gmail.com>

_pkgname=htop
pkgname=htop-vi
pkgver=1.0.2
pkgrel=4
pkgdesc="Interactive process viewer patched for vi style scroll keys"
arch=('i686' 'x86_64')
url="http://htop.sourceforge.net/"
license=('GPL')
depends=('ncurses')
makedepends=('python2')
provides=('htop')
conflicts=('htop')
options=('!emptydirs')
source=(http://downloads.sourceforge.net/$_pkgname/$_pkgname-${pkgver}.tar.gz
    htop-vi.patch)
md5sums=('0d01cca8df3349c74569cefebbd9919e'
         'fd13a0137144fd9c2c7ac43c2d8b48b5')

build() {
    cd ${srcdir}/$_pkgname-${pkgver}
    patch -N -i ../htop-vi.patch
    sed -i 's|ncursesw/curses.h|curses.h|' RichString.[ch] configure 
    sed -i 's|python|python2|' scripts/MakeHeader.py
    ./configure --prefix=/usr --enable-unicode --enable-openvz \
        --enable-vserver --enable-cgroup
    make
}

package() {
    cd ${srcdir}/$_pkgname-${pkgver}
    make DESTDIR=${pkgdir} install 
}
